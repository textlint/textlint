"use strict";(self.webpackChunktextlint_website=self.webpackChunktextlint_website||[]).push([[3259],{4318:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>a});var s=n(4700);const i={},r=s.createContext(i);function l(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:t},e.children)}},8415:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>m,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"formatter","title":"Formatter","description":"Result of linting","source":"@site/../docs/formatter.md","sourceDirName":".","slug":"/formatter","permalink":"/textlint/pr-preview/pr-1539/docs/formatter","draft":false,"unlisted":false,"editUrl":"https://github.com/textlint/textlint/edit/master/docs/../docs/formatter.md","tags":[],"version":"current","lastUpdatedBy":"renovate[bot]","lastUpdatedAt":1750578648000,"frontMatter":{"id":"formatter","title":"Formatter"},"sidebar":"docs","previous":{"title":"Plugin","permalink":"/textlint/pr-preview/pr-1539/docs/plugin"},"next":{"title":"Use as Node Modules","permalink":"/textlint/pr-preview/pr-1539/docs/use-as-modules"}}');var i=n(7968),r=n(4318);const l={id:"formatter",title:"Formatter"},a=void 0,o={},c=[{value:"Result of linting",id:"result-of-linting",level:2},{value:"Simple usage from Command line",id:"simple-usage-from-command-line",level:3},{value:"Result of fixing",id:"result-of-fixing",level:2},{value:"Simple usage from Command line",id:"simple-usage-from-command-line-1",level:3},{value:"How to get source code from result?",id:"how-to-get-source-code-from-result",level:2},{value:"Built-in formatter",id:"built-in-formatter",level:2},{value:"Custom Formatter",id:"custom-formatter",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"result-of-linting",children:"Result of linting"}),"\n",(0,i.jsxs)(t.p,{children:["Pass following array of ",(0,i.jsx)(t.code,{children:"TextLintResult"})," to reporter module."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'// results of linting\nconst results = [\n    // TextLintResult object\n    {\n        filePath: "./myfile.md",\n        messages: [\n            // TextLintMessage object\n            {\n                type: "lint",\n                ruleId: "semi",\n                line: 1,\n                column: 23,\n                message: "Expected a semicolon."\n            }\n        ]\n    }\n];\n'})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"TextLintMessage"})," and ",(0,i.jsx)(t.code,{children:"TextLintResult"})," are defined as follows."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:'export class TextlintMessage {\n    // See src/shared/type/MessageType.js\n    // Message Type\n    type: string;\n    // Rule Id\n    ruleId: string;\n    message: string;\n    // optional data\n    data?: any;\n    // FixCommand\n    fix?: TextlintFixCommand;\n    // location info\n    // Text -> AST TxtNode(0-based columns) -> textlint -> TextlintMessage(**1-based columns**)\n    line: number; // start with 1\n    column: number; // start with 1\n    // indexed-location\n    index: number; // start with 0\n    // Severity Level\n    // See src/shared/type/SeverityLevel.js\n    severity: number;\n}\n\n// Linting result\nexport interface TextlintResult {\n    filePath: string;\n    messages: TextlintMessage[];\n}\n\n// "range" will be replaced by "text"\nexport class TextlintFixCommand {\n    text: string;\n    range: [number, number];\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["It is compatible for ",(0,i.jsx)(t.a,{href:"https://eslint.org/docs/developer-guide/working-with-custom-formatters",title:"Documentation - ESLint - Pluggable JavaScript linter",children:"ESLint formatter"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"simple-usage-from-command-line",children:"Simple usage from Command line"}),"\n",(0,i.jsxs)(t.p,{children:["We can get the raw output to stdout using ",(0,i.jsx)(t.code,{children:"json"})," formatter."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sh",children:'$ textlint --format json <file>\n[\n    // TextLintResult object\n    {\n        filePath: "./myfile.md",\n        messages: [\n            // TextLintMessage object\n            {\n                ruleId: "semi",\n                line: 1,\n                column: 23,\n                message: "Expected a semicolon."\n            }\n        ]\n    }\n];\n'})}),"\n",(0,i.jsx)(t.h2,{id:"result-of-fixing",children:"Result of fixing"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"textlint"})," support ",(0,i.jsx)(t.a,{href:"/textlint/pr-preview/pr-1539/docs/rule-fixable",children:"fixable rule"})]}),"\n",(0,i.jsx)(t.p,{children:"Fixable result is a bit difference for things of linting."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'// results of fixing\nconst results = [\n    // TextLintFixResult\n    {\n        filePath: "./myfile.md",\n        // fixed content string\n        output: "fixed content",\n        // applied fixable messages\n        // messages is an array of `TextLintMessage`\n        applyingMessages: [],\n        // not fixable messages\n        // messages is an array of `TextLintMessage`\n        remainingMessages: [],\n        // messages is the same one of `TextLintResult`\n        // pre-applyingMessages + remainingMessages\n        // messages is an array of `TextLintMessage`\n        messages: []\n    }\n];\n'})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"TextLintFixResult"})," is defined as follows."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"// Fixing result\nexport interface TextlintFixResult {\n    filePath: string;\n    // fixed content\n    output: string;\n    // all messages = pre-applyingMessages + remainingMessages\n    // it is same with one of `TextlintResult`\n    messages: TextlintMessage[];\n    // applied fixable messages\n    applyingMessages: TextlintMessage[];\n    // original means original for applyingMessages and remainingMessages\n    // pre-applyingMessages + remainingMessages\n    remainingMessages: TextlintMessage[];\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:"It is not compatible for ESLint."}),"\n",(0,i.jsx)(t.h3,{id:"simple-usage-from-command-line-1",children:"Simple usage from Command line"}),"\n",(0,i.jsxs)(t.p,{children:["We can get the raw output to stdout using ",(0,i.jsx)(t.code,{children:"json"})," formatter."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sh",children:'$ textlint --fix --format json <file>\n[\n  {\n    "filePath": "./myfile.md",\n    "output": "content string",\n    "messages": [],\n    "applyingMessages": [],\n    "remainingMessages": []\n  }\n]\n'})}),"\n",(0,i.jsx)(t.h2,{id:"how-to-get-source-code-from-result",children:"How to get source code from result?"}),"\n",(0,i.jsxs)(t.p,{children:["You can read the source code from ",(0,i.jsx)(t.code,{children:"filePath"})," property."]}),"\n",(0,i.jsx)(t.h2,{id:"built-in-formatter",children:"Built-in formatter"}),"\n",(0,i.jsxs)(t.p,{children:["textlint use ",(0,i.jsx)(t.code,{children:"@textlint/linter-formatter"})," module as built-in formatter."]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://github.com/textlint/textlint/blob/master/packages/%40textlint/linter-formatter/README.md",title:"@textlint/linter-formatter",children:"@textlint/linter-formatter"})}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"custom-formatter",children:"Custom Formatter"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sh",children:"textlint -f <package-name>\n"})}),"\n",(0,i.jsxs)(t.p,{children:["e.g.) ",(0,i.jsx)(t.a,{href:"https://github.com/azu/textlint-formatter-codecov/tree/a5b93248e9c1d5719684b16ff87342d8654e2aa0",title:"textlint-formatter-codecov",children:"textlint-formatter-codecov"})]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sh",children:"textlint -f textlint-formatter-codecov\n# ==\ntextlint -f codecov\n"})})]})}function m(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);